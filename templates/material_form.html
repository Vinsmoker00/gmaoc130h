{% extends "base.html" %}
{% block content %}
  <h2>{{ 'Edit Material' if material else 'New Material' }}</h2>

  <form method="post">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label">Part Number</label>
        <input type="text" name="part_number" class="form-control" value="{{ material[1] if material else '' }}">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Serial Number</label>
        <input type="text" name="serial_number" class="form-control" value="{{ material[2] if material else '' }}">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Designation</label>
        <input type="text" name="designation" class="form-control" value="{{ material[3] if material else '' }}">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Category</label>
        <select name="category" class="form-select">
          {% set cat = material[7] if material else '' %}
          <option value="Rechange" {% if cat=='Rechange' %}selected{% endif %}>Rechange</option>
          <option value="Reparable" {% if cat=='Reparable' %}selected{% endif %}>Reparable</option>
          <option value="Outillage" {% if cat=='Outillage' %}selected{% endif %}>Outillage</option>
          <option value="Banc d'essai" {% if cat=="Banc d'essai" %}selected{% endif %}>Banc d'essai</option>
        </select>
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Workshop</label>
        <select name="workshop_id" class="form-select">
          <option value="">-- None --</option>
          {% set wsid = material[8] if material else '' %}
          {% for w in workshops %}
            <option value="{{ w[0] }}" {% if wsid == w[0] %}selected{% endif %}>{{ w[1] }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Position</label>
        <input type="text" name="position" class="form-control" value="{{ material[9] if material else '' }}">
      </div>
      <div class="col-md-4 mb-3">
        <label class="form-label">Dotation</label>
        <input type="number" name="dotation" class="form-control" value="{{ material[10] if material else 0 }}">
      </div>
      <div class="col-md-4 mb-3">
        <label class="form-label">Avionne</label>
        <input type="number" name="avionne" class="form-control" value="{{ material[11] if material else 0 }}">
      </div>
      <div class="col-md-4 mb-3">
        <label class="form-label">Stock</label>
        <input type="number" name="stock" class="form-control" value="{{ material[12] if material else 0 }}">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Att RPN</label>
        <input type="number" name="att_rpn" class="form-control" value="{{ material[13] if material else 0 }}">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">RPN</label>
        <input type="number" name="rpn" class="form-control" value="{{ material[14] if material else 0 }}">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Calibration Date</label>
        <input type="date" name="calibration_date" class="form-control" value="{{ material[15] if material else '' }}">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Calibration Expiration</label>
        <input type="date" name="calibration_expiration" class="form-control" value="{{ material[16] if material else '' }}">
      </div>
    </div>
    <button type="submit" class="btn btn-success">Save</button>
    <a href="{{ url_for('materials_list') }}" class="btn btn-secondary">Cancel</a>
  </form>
{% endblock %}
